<html>
  <head>
    <meta charset="utf-8" />
    <meta
      content="initial-scale=1,maximum-scale=1,user-scalable=no"
      name="viewport"
    />
    <title>WebTileLayer | ArcGIS API for JavaScript 4.23</title>

    <link
      href="https://js.arcgis.com/4.25/esri/themes/light/main.css"
      rel="stylesheet"
    />
    <script src="https://js.arcgis.com/4.25/"></script>

    <style>
      html,
      body,
      #viewDiv {
        padding: 0;
        margin: 0;
        height: 100%;
        width: 100%;
      }
    </style>

    <script>
      require([
        "esri/Map",
        "esri/views/MapView",
        "esri/layers/WebTileLayer",
        "esri/layers/BaseTileLayer",
        "esri/layers/MapImageLayer",
        "esri/widgets/BasemapGallery"
      ], (Map, MapView, WebTileLayer, BaseTileLayer, MapImageLayer,BasemapGallery) => {
        window.map = new Map({
          basemap: "satellite", // satellite dark-gray
        });
        window.view = new MapView({
          // center: [-111.3, 52.68],
          center: [117.37516770435536, 39.02839735844521],
          container: "viewDiv",
          map: map,
          zoom: 15,
          // scale: 50000000,
        });


        const basemapGallery = new BasemapGallery({
          view: view
        });

        // Add the widget to the top-right corner of the view
        view.ui.add(basemapGallery, {
          position: "top-right"
        });

        // arcgis/卫星影像
        // let satelliteLayer = new WebTileLayer({
        //   id: "satelliteLayer",
        //   title: "satelliteLayer",
        //   subDomains: [],
        //   urlTemplate:
        //     // "http://{subDomain}.tianditu.gov.cn/cia_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cia&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk=xxxxx",
        //     "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{level}/{row}/{col}",
        // });
        // map.add(satelliteLayer);

        // 天地图/卫星影像
        // let tdt = new WebTileLayer({
        //   id: "tdt",
        //   title: "tdt",
        //   subDomains: ["t0", "t1", "t2", "t3", "t4", "t5", "t6", "t7"],
        //   urlTemplate:
        //     // "https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{level}/{row}/{col}",
        //     "http://{subDomain}.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk=b6f37c93b07c4221255774628ca3a6be",
        // });
        // map.add(tdt);


        // 谷歌/卫星影像
        // let googleSatelliteLayer = new WebTileLayer({
        //   id: "googleSatelliteLayer",
        //   title: "googleSatelliteLayer",
        //   // 区域
        //   subDomains: ["mt1", "mt2", "mt3"],
        //   // 域名模板
        //   urlTemplate: "http://{subDomain}.google.cn/vt?lyrs=s@189&gl=cn&x={col}&y={row}&z={level}&s=Gali",
        // });
        // map.add(googleSatelliteLayer);

        // 谷歌/道路标记
        // let routeLayer = new WebTileLayer({
        //   id: "routeLayer",
        //   title: "routeLayer",
        //   subDomains: ["mt1", "mt2", "mt3"],
        //   urlTemplate:
        //     "http://{subDomain}.google.cn/vt/lyrs=h&hl=zh-CN&gl=cn&x={col}&y={row}&z={level}&s=Gali",
        // });
        // map.add(routeLayer);

        // 高德/卫星
        // let imageLayer = new WebTileLayer({
        //   id: "imageLayer",
        //   title: "imageLayer",
        //   subDomains: ["webst01"],
        //   urlTemplate:
        //     "http://{subDomain}.is.autonavi.com/appmaptile?x={col}&y={row}&z={level}&style=6",
        // });
        // map.add(imageLayer);

        // // 高德/国界,省界,城市,交通,标注
        // let imageLayer2 = new WebTileLayer({
        //   id: "imageLayer2",
        //   title: "imageLayer2",
        //   subDomains: ["webst01"],
        //   urlTemplate:
        //     "http://{subDomain}.is.autonavi.com/appmaptile?x={col}&y={row}&z={level}&lang=zh_cn&size=1&scale=1&style=8",
        // });
        // map.add(imageLayer2);

        // 高德/矢量地图+国界,省会,交通,标注
        // let imageLayer2 = new WebTileLayer({
        //   id: "imageLayer2",
        //   title: "imageLayer2",
        //   subDomains: ["webrd01"],
        //   urlTemplate:
        //     "http://{subDomain}.is.autonavi.com/appmaptile?x={col}&y={row}&z={level}&lang=zh_cn&size=1&scale=1&style=8",
        // });
        // map.add(imageLayer2);

        // const Blue = new MapImageLayer({
        //   id: "Blue",
        //   title: "Blue",
        //   url: "http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer",
        // });
        // map.add(Blue);

        // 捷泰智图/矢量Blue,暗夜
        // let BlueTile = new WebTileLayer({
        //   id: "BlueTile",
        //   title: "BlueTile",
        //   subDomains: [],
        //   urlTemplate:
        //     "http://map.geoq.cn/arcgis/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{level}/{row}/{col}",
        // });
        // map.add(BlueTile);

        // const MyTileLayer = BaseTileLayer.createSubclass({
        //   properties: {
        //     // createSubclass 或自动拼接 location.origin
        //     urlTemplate:
        //       "/tiled/?z={level}&x={col}&y={row}&mapType=vector&tk={subDomain}",
        //     subDomains: ["a", "b", "c"],
        //     tint: {
        //       value: null,
        //       // type: Color,
        //     },
        //   },
        //   // 初始化
        //   initialize: function (options) {
        //     console.log("this: ", this);
        //     // console.log('options: ', options);
        //   },
        //   // 加载
        //   load: function () {
        //     console.log("load");
        //   },
        //   // 卸载
        //   unload: function () {
        //     console.log("unload");
        //   },
        //   getTileUrl: function (level, row, col) {
        //     // const randomIndex = Math.floor(Math.random() * 2);
        //     // const subDomain = this.subDomains[1];
        //     return this.urlTemplate
        //       .replace("{level}", level)
        //       .replace("{row}", row)
        //       .replace("{col}", col)
        //       .replace("{subDomain}", 1);
        //   },
        // });

        // 国界 省会 交通 标注
        // let imageLayer3 = new MyTileLayer({
        //   id: "imageLayer3",
        //   title: "imageLayer3",
        //   // subDomains: [],
        //   urlTemplate:
        //     // "https://localhost:8080/tiled/?z={level}&x={col}&y={row}&mapType=vector&tk={subDomain}", // 本地谷歌/矢量
        //     // "https://webst03.is.autonavi.com/appmaptile?x={col}&y={row}&z={level}&style=6", // 卫星影像
        //     // "https://webst03.is.autonavi.com/appmaptile?x={col}&y={row}&z={level}&style=8", // 标注
        //     "http://webrd01.is.autonavi.com/appmaptile?x={col}&y={row}&z={level}&lang=zh_cn&size=1&scale=1&style=8", // 矢量地图
        // });
        // map.add(imageLayer3);
      });
    </script>
  </head>

  <body>
    <div id="viewDiv" style="height: calc(100vh - 100px)"></div>
    <button>change first polyline</button>
  </body>
</html>
